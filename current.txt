const EventEmitter = require('events');

class InventoryManager extends EventEmitter {
  constructor() {
    super();
    this.inventory = {};
  }

  addItem(name, quantity) {
    if (this.inventory[name]) {
      this.inventory[name] += quantity;
    } else {
      this.inventory[name] = quantity;
      this.emit('itemAdded', name, quantity);
    }
  }

  removeItem(name, quantity) {
    if (!this.inventory[name]) {
      return;
    }

    if (this.inventory[name] < quantity) {
      return; // Not enough stock; silently ignore as per test
    }

    this.inventory[name] -= quantity;
    this.emit('itemRemoved', name, quantity);

    if (this.inventory[name] === 0) {
      this.emit('itemOutOfStock', name);
    }
  }

  getInventory() {
    return { ...this.inventory }; // Avoid exposing internal state
  }
}

module.exports = InventoryManager;
