const EventEmitter = require('events');

class OrderProcessor extends EventEmitter {
  constructor() {
    super();
    this.orders = [];
  }

  placeOrder(orderId) {
    const exists = this.orders.some(order => order.id === orderId);
    if (!exists) {
      const order = { id: orderId, status: 'placed' };
      this.orders.push(order);
      this.emit('orderPlaced', orderId);
    }
  }

  shipOrder(orderId) {
    const order = this.orders.find(order => order.id === orderId);
    if (order && order.status === 'placed') {
      order.status = 'shipped';
      this.emit('orderShipped', orderId);
    }
  }

  deliverOrder(orderId) {
    const order = this.orders.find(order => order.id === orderId);
    if (order && order.status === 'shipped') {
      order.status = 'delivered';
      this.emit('orderDelivered', orderId);
    }
  }
}

module.exports = OrderProcessor;
